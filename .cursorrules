# Stitch Design System Docs â€” Cursor Rules
# VersÃ£o: 6.0.0 (2025-01)
# Stack: Next.js 16 + React 19 + Tailwind CSS v4

## ğŸ¯ REGRAS FUNDAMENTAIS

### Stack ObrigatÃ³ria
- Frontend: Next.js 16 (App Router) + React 19 + TypeScript strict
- Styling: Tailwind CSS v4 (CSS-first, @theme)
- UI Components: Custom UI components (ownership no projeto)
- Testing: Jest (Unit) + Playwright (E2E)
- Deploy: Vercel

### Idioma
- UI: PortuguÃªs Brasileiro (PT-BR)
- CÃ³digo: InglÃªs (variÃ¡veis, funÃ§Ãµes)
- ComentÃ¡rios: PortuguÃªs
- DocumentaÃ§Ã£o: PortuguÃªs

---

## ğŸ¨ DESIGN SYSTEM

### Sistema de Camadas (NUNCA pular)
```
Layer 1: bg-background  â†’ Fundo principal
Layer 2: bg-card        â†’ Cards, Modais
Layer 3: bg-popover     â†’ Popovers, seÃ§Ãµes
Layer 4: bg-accent      â†’ Inputs, hover
```

### Tokens SemÃ¢nticos (USAR SEMPRE)
- Cores: `bg-primary`, `text-foreground`, `border-border`
- NUNCA usar HEX inline: âŒ `bg-[#1c202a]`
- SEMPRE usar tokens: âœ… `bg-card`

### Cores de Status
- Success: `text-success` / `bg-success`
- Warning: `text-warning` / `bg-warning`
- Error: `text-error` / `bg-error` / `bg-destructive`
- Info: `text-info` / `bg-info`

### Cores de NavegaÃ§Ã£o
- Dashboard: `text-nav-dashboard`
-  Projetos: `text-nav-projects`
- Clientes: `text-nav-clients`
- FinanÃ§as: `text-nav-finance`
- RelatÃ³rios: `text-nav-reports`
- ConfiguraÃ§Ãµes: `text-nav-settings`
- Bugs: `text-nav-bugs`

---

## ğŸ§© COMPONENTES

### Componentes DisponÃ­veis em components/ui
- Badge
- Button
- Checkbox
- CommandMenu (Cmd+K)
- Input
- Switch

### PadrÃµes de Componente
```tsx
// SEMPRE usar forwardRef
const Component = React.forwardRef<HTMLDivElement, Props>(
  ({ className, ...props }, ref) => (
    <div ref={ref} className={cn("base-classes", className)} {...props} />
  )
)
Component.displayName = "Component"
```

### Sistema de Variants (cva)
```tsx
import { cva, type VariantProps } from "class-variance-authority"

const componentVariants = cva("base-classes", {
  variants: {
    variant: { default: "...", primary: "..." },
    size: { sm: "...", md: "...", lg: "..." }
  },
  defaultVariants: { variant: "default", size: "md" }
})
```

### BotÃµes
- AÃ§Ã£o primÃ¡ria: `variant="default"` ou `variant="primary"`
- Destrutivo: `variant="destructive"`
- SecundÃ¡rio: `variant="ghost"` ou `variant="outline"`

---

## â™¿ ACESSIBILIDADE

###ObrigatÃ³rio
- `focus-visible:ring-2` em todos elementos interativos
- `sr-only` em botÃµes com apenas Ã­cone
- `motion-reduce:animate-none` em animaÃ§Ãµes
- Labels em todos inputs
- Contraste mÃ­nimo 4.5:1 (texto) / 3:1 (UI)

### Exemplo BotÃ£o com Ãcone
```tsx
<Button size="icon">
  <Search className="size-4" />
  <span className="sr-only">Buscar</span>
</Button>
```

---

## ğŸ”§ UTILITÃRIOS

### cn() para Classes Condicionais
```tsx
import { cn } from "@/lib/utils"

<div className={cn("base-class", isActive && "active-class")} />
```

---

## ğŸš« ANTI-PATTERNS

### NUNCA fazer
```tsx
// âŒ Cores hardcoded
<div className="bg-[#1c202a]" />

// âŒ text-white que quebra em light mode
<p className="text-white">Texto</p>

// âŒ Classes dinÃ¢micas (Tailwind nÃ£o gera)
<div className={`text-${color}-500`} />

// âŒ Remover focus sem substituir
<button className="focus:outline-none" />

// âŒ Pular camadas
Modal (L2) â†’ Input (L4)  // ERRADO: falta L3
```

### SEMPRE fazer
```tsx
// âœ… Tokens semÃ¢nticos
<div className="bg-card" />

// âœ… Tokens de texto
<p className="text-foreground">Texto</p>

// âœ… Mapeamento explÃ­cito
const colorMap = { red: 'text-red-500', blue: 'text-blue-500' }

// âœ… Focus visible
<button className="focus:outline-none focus-visible:ring-2" />

// âœ… Respeitar camadas
Modal (L2) â†’ SeÃ§Ã£o (L3) â†’ Input (L4)
```

---

## ğŸ“ ESTRUTURA DE ARQUIVOS

```
inoveai-design-system/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ (routes)/         # Pages com App Router
â”‚   â”œâ”€â”€ globals.css       # Tailwind @theme + tokens
â”‚   â””â”€â”€ layout.tsx
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/               # Componentes base
â”‚   â”œâ”€â”€ layout/           # Layout wrappers
â”‚   â””â”€â”€ [feature].tsx     # Componentes especÃ­ficos
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ utils.ts          # cn(), helpers
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ components.json   # Metadata gerado
â”‚   â””â”€â”€ tokens.json       # Tokens gerado
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ extract-all.ts    # Script de extraÃ§Ã£o
â””â”€â”€ tests/                # Playwright E2E
```

---

## ğŸ¯ CHECKLIST ANTES DE COMMIT

- [ ] Sem cores hardcoded (HEX inline)
- [ ] Usando tokens semÃ¢nticos
- [ ] focus-visible em elementos interativos
- [ ] sr-only em botÃµes icon-only
- [ ] Testado em Light E Dark mode
- [ ] TypeScript sem erros (`npm run build`)
- [ ] Testes passando (`npm test`)
- [ ] E2E passando (`npm run test:e2e`)

---

## ğŸ“¦ ESPECÃFICO DESTE PROJETO

### Design System Docs
Este Ã© um site de **documentaÃ§Ã£o** do Stitch Design System.

**AtenÃ§Ã£o especial:**
- Screenshots sÃ£o gerados automaticamente (`scripts/extract-all.ts`)
- MudanÃ§as visuais impactam screenshots
- Testes E2E validam interface completa
- Componentes sÃ£o mostrados em light E dark mode

### Scripts Importantes
```bash
# Extrair componentes e tokens do DS original
npx tsx scripts/extract-all.ts

# Rodar dev server
npm run dev

# Build para produÃ§Ã£o
npm run build

# Testes
npm test                # Jest unit tests
npm run test:e2e        # Playwright E2E
npm run test:e2e:ui     # Playwright UI mode

# FormataÃ§Ã£o
npm run format          # Prettier
npm run format:check    # Verificar sem alterar
```

### Cores (v6.0 â€” OKLCH)
Projeto em processo de migraÃ§Ã£o HEX â†’ OKLCH.

**ReferÃªncia:**
- Light primary: `oklch(47.97% 0.089 195.68)`  (teal)
- Dark primary: `oklch(76.53% 0.096 196.73)`   (cyan)

Ver `app/globals.css` para paleta completa.

---

**Ãšltima AtualizaÃ§Ã£o:** 2025-01-02  
**VersÃ£o Design System:** GEMS 6.0
